<!DOCTYPE html>
<html>
  <head>
    <title>jQuery.imageloader() lets you load lazily so that your page gets loaded quicker.</title>
    <link rel="stylesheet" href="assets/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="assets/index.css" type="text/css" />
    <link rel="stylesheet" href="assets/prettify.css" type="text/css" />
    <script type="text/javascript" src="assets/require.js"></script>
    <script type="text/javascript" src="assets/prettify.js"></script>
  </head>
  <body>

<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="http://twitter.com/beatak">@beatak</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active">
            <a href="#overview">Overview</a>
          </li>
          <li class="">
            <a href="#examples">Examples</a>
          </li>
          <li class="">
            <a href="#faq">FAQ</a>
          </li>
          <li class="">
            <a href="#documentation">Documentation</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <a class="invisible-anchor" name="overview">&nbsp;</a>
  <header class="jumbotron masthead">
    <div class="inner">
      <h1>jQuery.imageloader()</h1>
      <p>lets you have granular controls of image loading timing</p>
      <p class="download-info">
        <a href="http://github.com/beatak/jquery-imageloader/" class="btn btn-primary btn-large">View project on GitHub</a>
        <a href="http://github.com/beatak/jquery-imageloader/zipball/master" class="btn btn-large">Download latest</a>
      </p>
    </div>

    <div class="bs-links">
      <ul class="quick-links">
        <li class="follow-btn">
          <a href="http://twitter.com/beatak" class="twitter-follow-button" data-link-color="#0069D6" data-show-count="true">Follow @beatak</a>
        </li>
      </ul>
    </div>
  </header>

  <hr class="soften" />

  <a class="invisible-anchor" name="examples">&nbsp;</a>
  <section class="examples">

    <!-- ========================================================= -->

    <div class="page-header">
      <h1>Exmples</h1>
    </div>

     <!-- ========================================================= -->

     <div class="row">
       <div class="span4">
         <p>if you just want to load image lazily: <button id="example-0">load!</button> </p>
         <div>
           <img class="lazy-img" src="assets/0.png" data-src="assets/city/w50/aep.jpg" />
           <img class="lazy-img" src="assets/0.png" data-src="assets/city/w50/bog.jpg" />
           <img class="lazy-img" src="assets/0.png" data-src="assets/city/w50/bom.jpg" />
         </div>
       </div>

       <div class="span8">
         <pre class="prettyprint linenums">&lt;img class="lazy-img" src="assets/0.png" data-src="assets/img1.jpg" /&gt;
&lt;img class="lazy-img" src="assets/0.png" data-src="assets/img2.jpg" /&gt;
&lt;img class="lazy-img" src="assets/0.png" data-src="assets/img3.jpg" /&gt;
&lt;script&gt;
  $(function() {
    $('.lazy-img').imageloader();
  });
&lt;/script&gt;</pre>
       </div>
     </div>

     <!-- ========================================================= -->

     <div class="row">
       <div class="span8">
         <pre class="prettyprint linenums">&lt;style type="text/css"&gt;
  .defferred-block { display: none; }
&lt;/style&gt;
&lt;div class="deffered-block"&gt;
  &lt;img class="defferred" src="assets/0.png" data-src="assets/img1.jpg" /&gt;
  &lt;img class="defferred" src="assets/0.png" data-src="assets/img2.jpg" /&gt;
  &lt;img class="defferred" src="assets/0.png" data-src="assets/img3.jpg" /&gt;
&lt;/div&gt;
&hellip;
&lt;script&gt;
  $(function() {
    $('.deffered-block').imageloader(
      {
        selector: '.defferred',
        callback: function (elm) {
          $(elm).slideDown();
        }
      }
    );
  });
&lt;/script&gt;</pre>
       </div>

       <div class="span4">
         <p>If you have multiple images lasily loaded with a height-required action. <button id="example-1">load!</button></p>
         <div class="deffered-block">
           <img class="defferred" src="assets/0.png" data-src="assets/city/w50/ccu.jpg" />
           <img class="defferred" src="assets/0.png" data-src="assets/city/w50/cgk.jpg" />
           <img class="defferred" src="assets/0.png" data-src="assets/city/w50/dac.jpg" />
         </div>
         <div class="deffered-block">
           <img class="defferred" src="assets/0.png" data-src="assets/city/w50/del.jpg" />
           <img class="defferred" src="assets/0.png" data-src="assets/city/w50/hkg.jpg" />
           <img class="defferred" src="assets/0.png" data-src="assets/city/w50/ist.jpg" />
         </div>
       </div>

     </div>

     <!-- ========================================================= -->

     <div class="row">
       <div class="span4">
         <p>You can load images to background as well. <button id="example-2">load!</button> </p>
         <div class="clearfix">
           <div class="my-square-image" data-src="assets/city/w50/khi.jpg">&nbsp</div>
           <div class="my-square-image" data-src="assets/city/w50/lax.jpg">&nbsp</div>
           <div class="my-square-image" data-src="assets/city/w50/lcy.jpg">&nbsp</div>
         </div>
       </div>

       <div class="span8">
         <pre class="prettyprint linenums">&lt;style type="text/css"&gt;
  .my-square-image { display:none; width: 50px; height: 50px; float: left; }
&lt;/style&gt;
&lt;div class="clearfix"&gt;
  &lt;div class="my-square-image" data-src="assets/img1.jpg"&gt;&amp;nbsp&lt;/div&gt;
  &lt;div class="my-square-image" data-src="assets/img2.jpg"&gt;&amp;nbsp&lt;/div&gt;
  &lt;div class="my-square-image" data-src="assets/img3.jpg"&gt;&amp;nbsp&lt;/div&gt;
&lt;/div&gt;
&lt;script&gt;
  $(function() {
    $('.my-square-image').imageloader(
      {
        background: true,
        callback: function (elm) {
          $(elm).fadeIn();
        }
      }
    );
  });
&lt;/script&gt;</pre>
       </div>
     </div>

     <!-- ========================================================= -->

     <div class="row">
       <div class="span8">
         <pre class="prettyprint linenums">&lt;div class="each-img-block"&gt;
  &lt;img class="each-img" src="assets/0.png" data-src="assets/img1.jpg" /&gt;
  &lt;img class="each-img" src="assets/0.png" data-src="assets/img2.jpg" /&gt;
  &lt;img class="each-img" src="assets/0.png" data-src="assets/img3.jpg" /&gt;
&lt;/div&gt;
&lt;script&gt;
  $(function() {
    $('.each-img-block').imageloader(
      {
        selector: '.each-img',
        each: function (elm) {
          console.log(elm);
        },
        callback: function (elm) {
          $(elm).fadeIn();
        }
      }
    );
  });
&lt;/script&gt;</pre>
       </div>

       <div class="span4">
         <p>For each image gets loaded, it fires a function. <button id="example-3">load!</button></p>
         <div class="each-img-block">
           <img class="each-img" src="assets/0.png" data-src="assets/city/w50/lim.jpg" />
           <img class="each-img" src="assets/0.png" data-src="assets/city/w50/los.jpg" />
           <img class="each-img" src="assets/0.png" data-src="assets/city/w50/mex.jpg" />
         </div>
       </div>

     </div>

     <!-- ========================================================= -->

     <div class="row" id="external-load">
       <div class="span12">
         <p>If you click the buttons below, it will open a popup window with pages that have several images.  If you load all <em id="imagecount"></em> images out of <em id="imageallcount"></em> on <code>window.onload</code> and <code>jQuery.imageloader lazy load</code> how different it would be?</p>
       </div>

       <div class="span4">
         <p class="small">(note: every page load of this page, JavaScript fetches different pictures from Flickr, 500px and imgur.  But still this is affected by cache, obviously.  Try reload the page a few times.)</p>          
         <p>
           <button id="nomarlimageloading">Load all at once</button> <br />
           <button id="jqueryimageloading">Load with jQuery.imageloader</button>
         </p>
       </div>

       <div class="span8">
         <table class="table table-bordered table-condensed">
           <tbody>
             <tr>
               <th colspan="2" class="th-background">All at once</th>
             </tr>
             <tr class="tr-all">
               <td>window.onload<br />(all image loaded): </td>
               <td><span class="counter" title="winload">&nbsp;</span> Milli-Second</td>
             </tr>
             <tr>
               <th colspan="2" class="th-background">jQuery.imageloader()</th>
             </tr>
             <tr class="tr-jil">
               <td>window.onload:</td>
               <td><span class="counter" title="winload">&nbsp;</span> Milli-Second</td>
             </tr>
             <tr class="tr-jil">
               <td>(all image loaded):</td>
               <td><span class="counter" title="loadup">&nbsp;</span> Milli-Second</td>
             </tr>
           </tbody>
         </table>
       </div>
     </div>

     <!-- ========================================================= -->

  </section>

  <a class="invisible-anchor" name="faq">&nbsp;</a>
  <section class="FAQ">
    <div class="page-header">
      <h1>FAQ</h1>
    </div>

    <div class="row">
      <div class="span6">
        <dl>
          <dt>Who is using this?</dt>
          <dd><a href="http://www.meetup.com/" target="_blank">Meetup</a> is using this.</dd>
        </dl>
      </div>

      <div class="span6">
        <dl>
          <dt>Why I wanna use this?</dt>
          <dd>Because it is designed to be flexible, memory less intensive, cleaning up all after done, and using a singleton queue mechanism so that it won't overwhelm browser UI thread.</dd>
        </dl>
      </div>
    </div>
  </section>

  <!-- ========================================================= -->

  <a class="invisible-anchor" name="documentation">&nbsp;</a>
  <section class="FAQ">
    <div class="page-header">
      <h1>Documentation</h1>
    </div>

     <div class="row">
       <div class="span12">
         <p>The instance option as follows:</p>
         <table class="table table-bordered table-condensed">
           <thead class="th-background">
             <th>
               Name
             </th>
             <th>
               Type
             </th>
             <th>
               Default
             </th>
             <th>
               Description
             </th>
           </thead>
           <tr>
             <td>
               <strong>selector</strong>
             </td>
             <td>
               string
             </td>
             <td>
               (empty string)
             </td>
             <td>
               Selector for the elements that $.fn.imageloader() will look for in order to load the image. If the empty string is passed, $.fn.imageloader() will try to load the image on "<em>this</em>" object.
             </td>
           </tr>
           <tr>
             <td>
               <strong>dataattr</strong>
             </td>
             <td>
               string
             </td>
             <td>
               "src"
             </td>
             <td>
               Data attribute for the elements that $.fn.imageloader() will look for. As default, $.fn.imageloader() will look for data-src attribute.
             </td>
           </tr>
           <tr>
             <td>
               <strong>background</strong>
             </td>
             <td>
               boolean
             </td>
             <td>
               false
             </td>
             <td>
               <em>true</em> if you want to load image as background-image css.
             </td>
           </tr>
           <tr>
             <td>
               <strong>callback</strong>
             </td>
             <td>
               function
             </td>
             <td>
               null
             </td>
             <td>
               Callback function when the image is loaded. "<em>this</em>" is passed as the first argument. See <a href="#examples">Examples above</a>.
             </td>
           </tr>
           <tr>
             <td>
               <strong>timeout</strong>
             </td>
             <td>
               number
             </td>
             <td>
               5000
             </td>
             <td>
               Millisecond for loading timeout.
             </td>
           </tr>
         </table>

         <hr />
         <p>There is also a global option:</p>
         <table class="table table-bordered table-condensed">
           <thead class="th-background">
             <th>
               Name
             </th>
             <th>
               Type
             </th>
             <th>
               Default
             </th>
             <th>
               Description
             </th>
           </thead>
           <tr>
             <td>
               <strong>$.imageloader.queueInterval</strong>
             </td>
             <td>
               number
             </td>
             <td>
               17
             </td>
             <td>
               A browser can only issue parallel HTTP requests 2 to 9 for each domain name as a default (<a href="http://www.browserscope.org/?category=network" title="Connections per Hostname">according to Browserscope</a>, May 2012). When you try to load massive numbers of images all at once, it can consume all browser's UI thread. So <em>$.fn.imageloader()</em> is using a time-domain queue for controling loading timing. 17 millisecond is a one frame delay under 60fps. As default, when you apply $.fn.imageloader() to numbers of elements, it will make &lt;img&gt; elements every 17 milliseconds.
             </td>
           </tr>
         </table>

       </div>
    </div>
  </section>

  <footer class="footer">
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>Designed in <a href="http://www.meetup.com/" target="_blank">Meetup</a> by <a href="http://twitter.com/beatak" target="_blank">@beatak</a>.</p>
    <p>Code licensed under the <a href="#" target="_blank">MIT</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
  </footer>

</div>

<script type="template/mustache" id="template-window">
  <html>
    <head>
      {{{SCRIPT0}}}
      {{{SCRIPT1}}}
      <title>{{TITLE}}</title>
    </head>
    <body {{{SCRIPTONLOAD}}}>
      {{{CONTENT}}}
    </body>
  </html>
</script>

<script type="template/mustache" id="template-imgblock-normal">
  <div style="float:left; width: 96px; height: 96px; overflow: hidden; padding: 1px; border: 1px solid #CCC; margin: 0 1px 1px 0;"><img src="{{{src}}}" /></div>
</script>

<script type="template/mustache" id="template-imgblock-lazy">
  <div style="float:left; width: 96px; height: 96px; overflow: hidden; padding: 1px; border: 1px solid #CCC; margin: 0 1px 1px 0;"><img src="assets/0.png" data-src="{{{src}}}" /></div>
</script>

<script type="text/javascript" src="assets/jquery-1.7.1.js"></script>
<script type="text/javascript" src="assets/mustache.js"></script>
<script type="text/javascript" src="jquery.imageloader.js"></script>
<script type="text/javascript" src="assets/index.js"></script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32167502-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>
